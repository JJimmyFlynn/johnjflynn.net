<section class="m-work c-index-section">
  <div class="container">
    <h2 class="section-heading">Some of My Work</h2>
    <div class="m-work__type-select c-tab-select">

      {# Output each portfolio category as a tab select #}
      {% for category in craft.categories().group('portfolioCategory').all() %}
        <span class="c-tab-select__tab{{ loop.first ? ' c-tab-select__tab--active' : '' }}" data-category="{{ category.slug }}" data-tab-select-tab>{{ category.title }}</span>
      {% endfor %}

    </div>
    {# /.c-tab-select #}

    {# Create a slider for each portfolio category #}
    {% for category in craft.categories().group('portfolioCategory').all() %}
    {% set currentCategory = category %}
      <div class="c-slider{{ loop.first ? ' c-slider--is-active' }}" data-slider data-slider-category="{{ currentCategory.slug }}">

      {# Ourput a slide for each entry in a portfolio category #}
      {% for slide in craft.entries().section('portfolio').relatedTo(currentCategory).with(['image']).all() | reverse %}
        <div class="c-slider__item c-slider__item--halves">
          <div class="c-slider__block">
            <img src="{{ slide.image[0].url }}" alt="">
          </div>
          {# /.c-clider__block #}
          <div class="c-slider__block">
            <h3 class="c-slider__heading">{{ slide.title }}</h3>
            <div class="c-slider__copy">
              {{ slide.description }}
            </div>
            {# /.c-slider__copy #}
          </div>
          {# /.c-slider__block #}
        </div>
        {# /.c-slider__item #}
      {% endfor %}

    </div>
    {# /.c-slider #}
    {% endfor %}

  </div>
  {# /.container #}
</section>
